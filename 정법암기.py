import streamlit as st
import random

# --------------------------------------------------------------------------
# 1. 페이지 기본 설정 및 스타일
# --------------------------------------------------------------------------
st.set_page_config(
    page_title="정치와 법 전단원 통합 마스터",
    page_icon="⚖️",
    layout="wide",
    initial_sidebar_state="expanded"
)

st.markdown("""
    <style>
    .main { background-color: #F8F9FA; }
    .stButton>button { 
        width: 100%; 
        border-radius: 12px; 
        font-weight: 700; 
        height: auto; 
        padding: 12px;
        transition: all 0.2s;
        border: 1px solid #E2E8F0;
    }
    .stButton>button:hover { 
        transform: scale(1.01); 
        border-color: #3182CE;
        color: #3182CE;
    }
    .explanation-box { 
        background-color: #2D3748; 
        color: #F7FAFC; 
        padding: 20px; 
        border-radius: 15px; 
        border-left: 6px solid #4FD1C5; 
        margin-top: 15px; 
        box-shadow: 0 4px 6px rgba(0,0,0,0.1);
        font-size: 0.95em;
        line-height: 1.6;
    }
    .keyword-pool { 
        background-color: white; 
        padding: 20px; 
        border-radius: 20px; 
        border: 2px dashed #CBD5E0;
        margin-top: 20px;
    }
    .status-card { 
        background-color: white; 
        padding: 15px; 
        border-radius: 15px; 
        border: 1px solid #E2E8F0; 
        text-align: center;
        box-shadow: 0 2px 4px rgba(0,0,0,0.05);
    }
    h1, h2, h3 { font-family: 'Pretendard', sans-serif; letter-spacing: -0.5px; }
    .block-container { padding-top: 2rem; padding-bottom: 5rem; }
    </style>
    """, unsafe_allow_html=True)

# --------------------------------------------------------------------------
# 2. 통합 데이터셋 (1~4단원 전체)
# --------------------------------------------------------------------------
FULL_DATA = {
    "CH1": {
        "title": "Ⅰ. 민주 정치와 법 (매칭 학습)",
        "type": "matching",
        "chapters": {
            "t1": {
                "title": "정치를 보는 관점",
                "options": ["국가 현상설", "집단 현상설"],
                "keywords": [
                    {'text': '국가 특유의 현상 (좁은 의미)', 'category': '국가 현상설'},
                    {'text': '모든 사회 집단의 보편적 현상 (넓은 의미)', 'category': '집단 현상설'},
                    {'text': '국가만이 가지는 권력적 특수성 강조', 'category': '국가 현상설'},
                    {'text': '국가와 일반 사회 집단 정치 간의 공통성 강조', 'category': '집단 현상설'},
                    {'text': '한계: 국가 성립 이전 정치 설명 불가', 'category': '국가 현상설'},
                    {'text': '한계: 국가만의 특수성(강제력) 간과 우려', 'category': '집단 현상설'},
                    {'text': '정치 권력을 배경으로 하는 통치 활동', 'category': '국가 현상설'},
                    {'text': '이해관계 대립과 갈등의 조정 과정', 'category': '집단 현상설'}
                ],
                "tips": ["집단 현상설은 국가를 '가장 거대한 하나의 사회 집단'으로 간주합니다."]
            },
            "t2": {
                "title": "법의 이념",
                "options": ["정의", "합목적성", "법적 안정성"],
                "keywords": [
                    {'text': '평균적 정의 (산술적 평등)', 'category': '정의'},
                    {'text': '배분적 정의 (실질적 평등)', 'category': '정의'},
                    {'text': '법이 시대적 목적에 부합해야 함', 'category': '합목적성'},
                    {'text': '개인의 자유 vs 공공복리의 조화', 'category': '합목적성'},
                    {'text': '국민이 법을 믿고 안심하고 생활하는 상태', 'category': '법적 안정성'},
                    {'text': '요건: 법 내용의 명확성, 실현 가능성', 'category': '법적 안정성'},
                    {'text': '제도: 시효 제도, 법률 불소급의 원칙', 'category': '법적 안정성'},
                    {'text': '신뢰 보호의 원칙, 잦은 법 개정 지양', 'category': '법적 안정성'}
                ],
                "tips": ["정의는 법의 최고 가치이며, 법적 안정성은 법이 사회 질서를 유지하기 위해 갖춰야 할 상태입니다."]
            },
            "t3": {
                "title": "고대 아테네 민주 정치",
                "options": ["민회", "평의회", "재판소"],
                "keywords": [
                    {'text': '성인 남성 전원 참석 (최고 의결 기구)', 'category': '민회'},
                    {'text': '추첨·윤번제 선출 500인 (행정/집행)', 'category': '평의회'},
                    {'text': '추첨 배심원 구성 (사법권 행사)', 'category': '재판소'},
                    {'text': '법률 제정 및 국가 정책 최종 결정', 'category': '민회'},
                    {'text': '민회 안건 예비 심사 및 행정 집행', 'category': '평의회'},
                    {'text': '제한적 민주정 (여성, 노예, 제외)', 'category': '민회'},
                    {'text': '전문직(군사령관 등)은 선거 선출', 'category': '평의회'},
                    {'text': '도편 추방제 실시 여부 의결', 'category': '민회'}
                ],
                "tips": ["전문 지식이 필요한 자리는 추첨이 아닌 '선거'로 뽑았습니다."]
            },
            "t4": {
                "title": "근대 시민 혁명",
                "options": ["영국 명예혁명", "미국 독립혁명", "프랑스 대혁명"],
                "keywords": [
                    {'text': '권리 장전 승인, 입헌주의 기틀', 'category': '영국 명예혁명'},
                    {'text': '독립 선언서 선포, 최초 민주 공화국', 'category': '미국 독립혁명'},
                    {'text': '인권 선언문 선포, 봉건적 특권 폐지', 'category': '프랑스 대혁명'},
                    {'text': '계몽 사상 및 사회 계약설이 배경', 'category': '프랑스 대혁명'},
                    {'text': '대의제 원리 및 권력 분립 확립', 'category': '미국 독립혁명'},
                    {'text': '국왕 권력 제한, 의회 중심 전통', 'category': '영국 명예혁명'}
                ],
                "tips": ["근대 혁명은 저항권 사상을 기반으로 절대 왕정을 타도한 사건입니다."]
            },
            "t5": {
                "title": "사회 계약설 비교",
                "options": ["홉스", "로크", "루소"],
                "keywords": [
                    {'text': '성악설, 만인의 투쟁, 군주 주권', 'category': '홉스'},
                    {'text': '성무선악설, 잠재적 투쟁, 국민 주권', 'category': '로크'},
                    {'text': '성선설, 불평등 발생, 국민 주권', 'category': '루소'},
                    {'text': '권리 전부 양도, 저항권 부정', 'category': '홉스'},
                    {'text': '권리 일부 위임(신탁), 저항권 인정', 'category': '로크'},
                    {'text': '권리 양도 불가(직접 행사)', 'category': '루소'},
                    {'text': '입헌 군주정 (대의제) 지향', 'category': '로크'},
                    {'text': '직접 민주주의 (민주 공화정)', 'category': '루소'}
                ],
                "tips": ["저항권 인정 여부는 로크를 판별하는 가장 확실한 기준입니다."]
            },
            "t6": {
                "title": "법치주의",
                "options": ["형식적 법치주의", "실질적 법치주의"],
                "keywords": [
                    {'text': '절차와 형식적 합법성만 강조', 'category': '형식적 법치주의'},
                    {'text': '목적과 내용의 정의성 중시', 'category': '실질적 법치주의'},
                    {'text': '법에 의한 지배 (Rule by law)', 'category': '형식적 법치주의'},
                    {'text': '법의 지배 (Rule of law)', 'category': '실질적 법치주의'},
                    {'text': '독재 정당화 수단 악용', 'category': '형식적 법치주의'},
                    {'text': '위헌 법률 심사 등 통제 장치', 'category': '실질적 법치주의'},
                    {'text': '악법도 법이라는 법실증주의', 'category': '형식적 법치주의'},
                    {'text': '인권 보장과 실질적 평등 실현', 'category': '실질적 법치주의'}
                ],
                "tips": ["형식적 법치주의는 나치 수권법과 같은 독재의 도구로 쓰였습니다."]
            },
            "t7": {
                "title": "민주 정치의 원리",
                "options": ["국민 주권", "국민 자치", "권력 분립", "입헌주의"],
                "keywords": [
                    {'text': '주권이 국민 전체에게 있음', 'category': '국민 주권'},
                    {'text': '다스리는 자와 받는 자의 일치', 'category': '국민 자치'},
                    {'text': '국가 기관 간의 견제와 균형', 'category': '권력 분립'},
                    {'text': '헌법에 의해 권력이 창설/통제됨', 'category': '입헌주의'},
                    {'text': '수평적/수직적(지방자치) 분립', 'category': '권력 분립'},
                    {'text': '최고성과 독립성을 가진 권력', 'category': '국민 주권'},
                    {'text': '직접 민주주의 원리 실현', 'category': '국민 자치'},
                    {'text': '최고 규범인 헌법에 입각한 통치', 'category': '입헌주의'}
                ],
                "tips": ["국민 자치는 주권의 실제 행사 방식을 다룹니다."]
            },
            "t9": {
                "title": "헌법의 기본 원리",
                "options": ["국민 주권", "자유 민주주의", "복지 국가", "평화 통일"],
                "keywords": [
                    {'text': '참정권 보장, 언론의 자유', 'category': '국민 주권'},
                    {'text': '복수 정당제, 죄형법정주의', 'category': '자유 민주주의'},
                    {'text': '법치주의, 적법 절차의 원칙', 'category': '자유 민주주의'},
                    {'text': '사회 보장 제도, 최저 임금제', 'category': '복지 국가'},
                    {'text': '자유 민주적 기본 질서 입각', 'category': '평화 통일'},
                    {'text': '방어적 민주주의 (정당해산)', 'category': '자유 민주주의'},
                    {'text': '소득 재분배, 실질적 평등', 'category': '복지 국가'},
                    {'text': '남북 사이의 화해와 협력', 'category': '평화 통일'}
                ],
                "tips": ["복수 정당제는 특정 정당의 독재를 막는 자유 민주주의의 핵심입니다."]
            },
            "t10": {
                "title": "기본권의 종류",
                "options": ["자유권", "평등권", "참정권", "청구권", "사회권"],
                "keywords": [
                    {'text': '국가로부터의 자유 (소극적)', 'category': '자유권'},
                    {'text': '합리적 이유 없는 차별 금지', 'category': '평등권'},
                    {'text': '국정에 참여하는 권리 (입장적)', 'category': '참정권'},
                    {'text': '절차적/수단적 권리', 'category': '청구권'},
                    {'text': '국가에 의한 자유 (인간다운 생활)', 'category': '사회권'},
                    {'text': '가장 오래된 권리, 포괄적', 'category': '자유권'},
                    {'text': '기본권 보장의 전제 조건', 'category': '평등권'},
                    {'text': '선거권, 공무 담임권', 'category': '참정권'},
                    {'text': '재판 청구권, 국가 배상 청구', 'category': '청구권'},
                    {'text': '교육권, 근로권, 환경권 (현대적)', 'category': '사회권'}
                ],
                "tips": ["자유권은 방어적, 사회권은 요청적 성격을 띱니다."]
            }
        }
    },
    "CH2": {
        "title": "Ⅱ. 민주 국가와 정부 (퀴즈 학습)",
        "type": "quiz",
        "chapters": {
            "g1": { "title": "01. 전형적인 정부 형태", "questions": [
                { "q": "의원 내각제에서 입법부와 행정부가 밀접하게 연결되는 핵심 원리는?", "correct": "입법부와 행정부의 권력 융합", "wrongs": ["엄격한 권력 분립", "대통령의 법률안 거부권"], "r": "내각제는 권력 융합, 대통령제는 권력 분립을 기본 원리로 합니다." },
                { "q": "대통령제에서 행정부 수반이 국회를 견제하기 위해 사용하는 고유 권한은?", "correct": "법률안 거부권", "wrongs": ["의회 해산권", "내각 불신임권"], "r": "거부권은 대통령제의 대표적 견제 수단입니다." },
                { "q": "의원 내각제에서 내각이 존립하기 위해 반드시 필요한 요소는?", "correct": "의회의 신임", "wrongs": ["국민의 직접 선거", "대통령의 임명"], "r": "내각은 의회의 신임을 바탕으로 하며, 불신임 시 총사퇴해야 합니다." },
                { "q": "대통령제가 국정 운영의 안정성 측면에서 가지는 최대 장점은?", "correct": "대통령 임기 보장을 통한 정국 안정", "wrongs": ["신속한 입법 처리", "책임 정치 구현 용이"], "r": "대통령제는 정해진 임기 동안 정책 일관성을 유지하기 유리합니다." },
                { "q": "미국식 대통령제에는 없으나 한국 헌법에 도입된 내각제 요소는?", "correct": "정부의 법률안 제출권", "wrongs": ["대통령의 법률안 거부권", "국회의 탄핵 소추권"], "r": "미국은 엄격 분립으로 정부가 법안을 직접 내지 못합니다." },
                { "q": "의원 내각제에서 현직 의원이 장관을 겸직하는 현상의 근거는?", "correct": "권력 융합", "wrongs": ["권력 분립", "사법 독립"], "r": "내각제는 인적 결합을 통한 권력 융합을 특징으로 합니다." },
                { "q": "대통령제에서 대통령이 정치적으로 최종 책임을 지는 주체는?", "correct": "국민", "wrongs": ["의회", "헌법재판소"], "r": "대통령은 국민이 직접 선출하므로 국민에 대해 책임을 집니다." },
                { "q": "의원 내각제에서 다수 정당이 없을 때 군소 정당들이 연합하여 구성하는 형태는?", "correct": "연립 내각", "wrongs": ["단독 내각", "동거 정부"], "r": "의석을 합쳐 과반을 만드는 것을 연립 내각이라고 합니다." },
                { "q": "대통령제에서 입법부와 행정부 대립 시 제도적 해결이 어려운 이유는?", "correct": "상호 임기 보장", "wrongs": ["내각 불신임 가능", "의회 해산권 존재"], "r": "대통령제는 상호 임기 보장으로 인해 충돌 시 정국 마비 우려가 있습니다." },
                { "q": "의원 내각제 국가 원수의 권한을 상징하는 표현은?", "correct": "왕은 군림하되 통치하지 않는다", "wrongs": ["왕은 법 위에 있다", "의회는 왕의 보좌 기구다"], "r": "실권은 총리에게 있고 왕은 상징적인 통합 주체입니다." }
            ]},
            "g3": { "title": "03. 우리나라의 정부 형태", "questions": [
                { "q": "한국 대통령제에서 부통령 대신 두고 있는 내각제 유래의 직책은?", "correct": "국무총리", "wrongs": ["감사원장", "비서실장"], "r": "국무총리는 한국의 대표적 내각제 요소입니다." },
                { "q": "한국 헌법상 행정부가 국회에 법률안을 낼 수 있는 권한은?", "correct": "내각제적 요소", "wrongs": ["대통령제적 요소", "이원 집정부제적 요소"], "r": "정부의 법안 제출은 권력 융합적인 내각제 특징입니다." },
                { "q": "국회의원이 장관직을 겸임할 수 있도록 허용하는 원리는?", "correct": "권력 융합", "wrongs": ["엄격한 권력 분립", "사법 독립"], "r": "인적 결합은 전형적인 내각제적 요소입니다." },
                { "q": "대통령이 국회 의결 법률안을 거부하는 권한의 성격은?", "correct": "대통령제 요소", "wrongs": ["내각제 요소", "이원집정부제 요소"], "r": "거부권은 행정부가 입법부를 견제하는 핵심 수단입니다." },
                { "q": "우리나라 행정부 최고 심의 기구인 국무회의의 유래는?", "correct": "내각제 요소", "wrongs": ["대통령제 요소", "사법부 요소"], "r": "국무회의는 내각제적 성격의 필수 심의 기관입니다." },
                { "q": "국회가 고위 공직자에게 정치적 책임을 물어 사퇴를 요구하는 권한은?", "correct": "해임 건의권", "wrongs": ["탄핵 소추권", "국정 감사권"], "r": "해임 건의권은 변형된 내각제적 요소입니다." },
                { "q": "대통령 국법상 행위에 총리와 관계 국무위원이 서명하는 제도는?", "correct": "부서 제도", "wrongs": ["사전 동의", "사후 보고"], "r": "부서 제도는 대통령의 독단을 막기 위한 내각제 장치입니다." },
                { "q": "국무총리 임명 시 국회의 동의를 얻도록 하는 절차의 성격은?", "correct": "내각제 요소", "wrongs": ["대통령제적 요소", "직접 민주제"], "r": "의회가 행정부 인사 구성에 관여하는 특징입니다." },
                { "q": "대통령이 선포한 계엄을 국회가 해제 요구할 때 대통령의 의무는?", "correct": "지체 없이 해제해야 함", "wrongs": ["거부권 행사 가능", "국무회의 재심의"], "r": "계엄 해제 요구권은 국회의 강력한 통제권입니다." },
                { "q": "대통령이 헌법 개정안을 발의할 수 있는 권한의 지위는?", "correct": "국가 원수", "wrongs": ["행정부 수반", "입법부 의장"], "r": "헌법 수호 책임자로서 가지는 국가 원수의 권한입니다." }
            ]},
            "g12": { "title": "12. 대통령의 지위와 권한", "questions": [
                { "q": "대통령이 조약을 체결·비준하며 국가를 대표하는 지위는?", "correct": "국가 원수", "wrongs": ["행정부 수반", "국무회의 의장"], "r": "대외적 국가 대표권은 국가 원수의 지위에서 비롯됩니다." },
                { "q": "대통령이 공무원을 임명하거나 파면하는 인사권 행사의 지위는?", "correct": "행정부 수반", "wrongs": ["국가 원수", "입법부 수장"], "r": "내부 조직 관리 및 인사권은 행정부 수반의 지위입니다." },
                { "q": "법률안 거부권 행사는 대통령의 어떤 지위에서 비롯되는가?", "correct": "행정부 수반", "wrongs": ["국가 원수", "입법부 수장"], "r": "입법부 견제를 통한 행정부 권한 수호는 수반의 지위입니다." },
                { "q": "확정된 형벌을 감면해주는 사면권을 행사하는 지위는?", "correct": "국가 원수", "wrongs": ["행정부 수반", "법무부 장관"], "r": "판결 효력을 변경하는 통치 행위로 국가 원수의 지위입니다." },
                { "q": "대법원장이나 헌재소장을 임명하여 헌법 기구를 구성하는 지위는?", "correct": "국가 원수", "wrongs": ["행정부 수반", "비서실장"], "r": "국가 전체 통치 기구를 구성하는 것은 국가 원수 지위입니다." },
                { "q": "법률 집행을 위해 대통령령을 제정하는 행정 입법 지위는?", "correct": "행정부 수반", "wrongs": ["국가 원수", "사법 행정가"], "r": "법률 위임에 따른 집행 사무는 행정부 수반의 역할입니다." },
                { "q": "헌법상 국군을 지휘하고 통솔하는 국군 통수권의 지위는?", "correct": "행정부 수반", "wrongs": ["국가 원수", "국방부 장관"], "r": "국군 통수는 행정부 최고 책임자로서의 지위입니다." },
                { "q": "중요 정책을 국민 투표에 부칠 수 있는 권한의 지위는?", "correct": "국가 원수", "wrongs": ["행정부 수반", "국회의장"], "r": "주권자인 국민에게 직접 묻는 중대 사안이므로 국가 원수 지위입니다." },
                { "q": "대한민국 대통령의 임기와 중임에 대한 현행 헌법 규정은?", "correct": "5년 단임", "wrongs": ["4년 중임", "7년 단임"], "r": "독재 방지를 위해 87년 개헌 이후 단임제가 유지되고 있습니다." },
                { "q": "대통령이 재직 중 형사 기소되지 않는 불소추 특권의 예외는?", "correct": "내란 또는 외환의 죄", "wrongs": ["뇌물 수수", "직권 남용"], "r": "국가 존립을 위태롭게 하는 중죄가 아니면 기소되지 않습니다." }
            ]},
            "g15": { "title": "15. 사법부와 법원", "questions": [
                { "q": "우리나라 법원의 기본적인 재판 심급 체계는?", "correct": "3심제", "wrongs": ["단심제", "2심제"], "r": "신중한 재판을 위해 3심제를 원칙으로 합니다." },
                { "q": "대통령 선거의 효력을 다투는 소송의 심급은?", "correct": "단심 (대법원)", "wrongs": ["2심제", "3심제"], "r": "대선과 총선 소송은 신속을 위해 대법원 단심입니다." },
                { "q": "명령이나 처분이 위법한지 최종 심사하는 권한을 가진 곳은?", "correct": "대법원", "wrongs": ["헌법재판소", "국회"], "r": "명령·규칙의 최종 심사권은 대법원에 있습니다." },
                { "q": "사법권 독립을 보장하는 궁극적인 이유는?", "correct": "공정한 재판과 국민 인권 보호", "wrongs": ["판사의 소득 보장", "재판의 속도 향상"], "r": "외부 간섭을 막아야 공정한 판결이 가능합니다." },
                { "q": "대법원장 임명 시 필수적인 절차는?", "correct": "국회의 동의", "wrongs": ["국회의 직접 선출", "국민 직접 선거"], "r": "입법부 동의를 얻어 대통령이 임명합니다." },
                { "q": "확정된 판결에 대해 동일 사건으로 다시 소송할 수 없는 원칙은?", "correct": "일사부재리", "wrongs": ["일사부재의", "심급 제도"], "r": "법적 안정성을 위해 다시 다투지 못하게 합니다." },
                { "q": "군사재판 중 반드시 상고권(3심)이 보장되어야 하는 경우는?", "correct": "사형을 선고할 때", "wrongs": ["벌금을 부과할 때", "징역형일 때"], "r": "생명과 직결된 사형은 예외 없이 상고가 가능해야 합니다." },
                { "q": "사법부 내부 규율과 행정 사무를 의결하는 최고 기구는?", "correct": "대법관 회의", "wrongs": ["전원 합의체", "판사 회의"], "r": "대법관들이 모여 사법 행정을 결정합니다." },
                { "q": "판사가 법을 위반했을 때 신분을 박탈할 수 있는 유일한 방법은?", "correct": "탄핵 소추 및 탄핵 결정", "wrongs": ["대통령의 해임 명령", "국민 소환"], "r": "강력한 신분 보장이 특징입니다." },
                { "q": "일반 법관(판사)의 임기와 연임 여부는?", "correct": "임기 10년, 연임 가능", "wrongs": ["임기 6년, 단임", "임기 15년"], "r": "10년마다 재임명 절차를 거칩니다." }
            ]}
        }
    },
    "CH3": {
        "title": "Ⅲ. 정치 과정과 참여 (퀴즈 학습)",
        "type": "quiz",
        "chapters": {
            "p1": { "title": "01. 이스턴의 투입-산출 모형", "questions": [
                { "q": "시민이나 사회단체가 문제를 해결해 달라고 목소리를 내는 단계는?", "correct": "투입 (Input)", "wrongs": ["산출", "환류"], "r": "투입은 요구와 지지를 통해 정치 체계로 의사를 전달하는 단계입니다." },
                { "q": "정책 결정 기구가 투입을 바탕으로 법이나 정책을 확정하는 과정은?", "correct": "정책 결정 (Conversion)", "wrongs": ["투입", "산출"], "r": "블랙박스 내부에서 요구가 정책으로 변환되는 전환 과정입니다." },
                { "q": "구체적인 권위적 배분으로 나타나는 정책의 결과물은?", "correct": "산출 (Output)", "wrongs": ["투입", "환류"], "r": "법률 제정, 정책 시행, 예산 집행 등이 산출에 해당합니다." },
                { "q": "산출된 정책에 대한 시민의 반응이 다시 새로운 투입으로 이어지는 과정은?", "correct": "환류 (Feedback)", "wrongs": ["전환", "결정"], "r": "정책 보완이나 새로운 요구를 발생시켜 정치의 지속성을 유지합니다." },
                { "q": "투입의 구성 요소 중 구체적인 의사 표시를 의미하는 것은?", "correct": "요구 (Demand)", "wrongs": ["지지", "산출"], "r": "최저임금 인상 요구와 같은 구체적인 목소리가 요구입니다." },
                { "q": "정치 체계에 대한 신뢰와 세금 납부 등을 의미하는 투입 요소는?", "correct": "지지 (Support)", "wrongs": ["요구", "환류"], "r": "정치 시스템이 유지될 수 있도록 돕는 협조적인 행위입니다." },
                { "q": "이스턴 모형에서 '정책 결정 기구'에 해당하는 공식적 참여자는?", "correct": "국가 기관", "wrongs": ["정당과 시민단체", "언론과 이익집단"], "r": "법적 권한을 가지고 정책을 최종 확정하는 주체들입니다." },
                { "q": "이스턴 모형에서 투입을 담당하는 대표적인 비공식적 참여자는?", "correct": "정당, 시민 단체", "wrongs": ["국회, 정부, 법원", "중앙선관위"], "r": "국가 기관은 아니지만 요구를 집약하여 전달하는 역할을 합니다." },
                { "q": "정치 체계 내부의 의사결정 과정을 일컫는 비유적 표현은?", "correct": "블랙박스 (Black Box)", "wrongs": ["화이트박스", "피드백 루프"], "r": "내부의 복잡한 전환 과정을 상징적으로 표현한 용어입니다." },
                { "q": "산출된 정책이 사회에 적용된 후 발생하는 일련의 순환을 뜻하는 용어는?", "correct": "정치 과정의 순환", "wrongs": ["단방향 결정", "비가역적 집행"], "r": "투입-산출-환류가 반복되며 정치 시스템이 유지됨을 의미합니다." }
            ]},
            "p3": { "title": "03. 민주 선거의 4대 원칙", "questions": [
                { "q": "일정 연령 이상의 모든 국민에게 선거권을 주는 원칙은?", "correct": "보통 선거", "wrongs": ["평등 선거", "직접 선거"], "r": "제한 선거의 반대로 재산·성별·학력 등에 따른 제한을 배격합니다." },
                { "q": "모든 유권자에게 1인 1표와 표의 가치 평등을 보장하는 원칙은?", "correct": "평등 선거", "wrongs": ["보통 선거", "비밀 선거"], "r": "투표 성과 가치의 평등을 의미하며 차등 선거의 반대입니다." },
                { "q": "대리인을 거치지 않고 유권자가 직접 후보를 선출해야 하는 원칙은?", "correct": "직접 선거", "wrongs": ["간접 선거", "자유 선거"], "r": "유권자의 의사가 왜곡 없이 전달되도록 직접 투표를 강조합니다." },
                { "q": "투표 내용을 제3자가 알지 못하게 보장하는 원칙은?", "correct": "비밀 선거", "wrongs": ["공개 선거", "자유 선거"], "r": "외부의 압력 없이 소신껏 투표할 수 있도록 보장하는 장치입니다." },
                { "q": "선거구 간 과도한 인구 편차가 발생할 때 위배되는 원칙은?", "correct": "평등 선거", "wrongs": ["보통 선거", "직접 선거"], "r": "표의 가치가 불평등해지므로 평등 선거 원칙에 어긋납니다." },
                { "q": "과도한 기탁금을 요구하여 후보 등록을 막는 것은 무엇 위반인가?", "correct": "보통 선거", "wrongs": ["평등 선거", "비밀 선거"], "r": "경제적 능력에 의해 피선거권이 제한되므로 보통 선거 위반입니다." },
                { "q": "정당 투표 없이 지역구 득표만으로 비례대표를 배분하는 것은?", "correct": "직접 선거 위반", "wrongs": ["평등 선거 위반", "보통 선거 위반"], "r": "정당을 직접 선택할 권리를 침해하므로 직접 선거에 위배됩니다." },
                { "q": "투표소 50m 이내에서의 출구 조사가 제한되는 근거 원칙은?", "correct": "비밀 선거", "wrongs": ["직접 선거", "보통 선거"], "r": "투표 내용 유출 가능성을 차단하여 비밀을 유지하기 위함입니다." },
                { "q": "선거에 참여하지 않아도 불이익을 당하지 않는 원칙은?", "correct": "자유 선거", "wrongs": ["보통 선거", "비밀 선거"], "r": "강제 선거의 반대로 투표의 자유를 보장하는 해석상 원칙입니다." },
                { "q": "수형자에 대해 투표권을 전면 금지하는 제도가 위반하는 원칙은?", "correct": "보통 선거", "wrongs": ["평등 선거", "직접 선거"], "r": "특정 집단의 선거권을 박탈하는 것이므로 보통 선거 원칙 위배입니다." }
            ]},
            "p10": { "title": "10. 참여 주체 3자 비교", "questions": [
                { "q": "정권을 획득하여 정치적 이상을 실현하는 것을 목적으로 하는 집단은?", "correct": "정당", "wrongs": ["이익 집단", "시민 단체"], "r": "정당의 궁극적인 존재 이유는 권력 획득과 정부 구성입니다." },
                { "q": "자신들의 '특수 이익' 실현을 최우선으로 하는 집단은?", "correct": "이익 집단", "wrongs": ["정당", "시민 단체"], "r": "구성원들의 전문적·경제적 이해관계를 대변하는 역할을 합니다." },
                { "q": "사익이 아닌 사회 전체의 '공익' 실현을 목적으로 하는 단체는?", "correct": "시민 단체", "wrongs": ["이익 집단", "정당"], "r": "환경 보호나 인권 신장 등 보편적 가치를 추구하는 비영리 단체입니다." },
                { "q": "다음 중 정치적 결과에 대해 '책임'을 지는 유일한 집단은?", "correct": "정당", "wrongs": ["이익 집단", "시민 단체"], "r": "선거 결과를 통해 유권자의 심판을 직접적으로 받기 때문입니다." },
                { "q": "정당, 이익 집단, 시민 단체의 공통적인 기능은?", "correct": "정치 과정의 투입 기능 담당", "wrongs": ["정권 획득 목표", "공식적 정책 결정"], "r": "모두 비공식적 참여자로서 시민의 의사를 정부에 전달합니다." },
                { "q": "이익 집단이 가질 수 있는 치명적인 부정적 측면은?", "correct": "집단 이기주의로 인한 공익 저해", "wrongs": ["정치적 책임의 과다", "전문성 결여"], "r": "자신들의 이익만 챙기려다 전체 사회에 해를 끼칠 우려가 있습니다." },
                { "q": "정당이 하는 기능 중 유능한 인재를 선거 후보로 내세우는 것은?", "correct": "정치적 충원", "wrongs": ["여론 형성", "정부 감시"], "r": "공천을 통해 정치 지도자를 배출하는 핵심 기능입니다." },
                { "q": "현대 민주주의에서 정당의 전문성 부족을 보완하는 단체는?", "correct": "이익 집단", "wrongs": ["시민 단체", "선거관리위원회"], "r": "해당 분야의 전문가들이 모여 상세한 정책 대안을 제시하곤 합니다." },
                { "q": "시민 단체가 정부를 견제하는 가장 주된 방법은?", "correct": "감시와 비판 (Watchdog)", "wrongs": ["법률안 직접 제정", "후보자 공천"], "r": "시민의 눈으로 권력의 남용을 막고 올바른 길로 유도합니다." },
                { "q": "세 참여 주체의 공통적인 지위는?", "correct": "비공식적 정책 결정 참여자", "wrongs": ["헌법상 필수 기관", "정부 구성의 주체"], "r": "법적으로 정책을 확정할 권한은 없지만 영향력을 행사하는 참여자입니다." }
            ]}
        }
    },
    "CH4": {
        "title": "Ⅳ. 개인 생활과 법 (120제 집중 학습)",
        "type": "quiz",
        "chapters": {
            "l1": { "title": "01. 민법 기초와 사회법", "questions": [
                { "q": "사적인 법률관계에 공적인 규제를 가하여 만든 '제3의 영역' 법은?", "correct": "사회법", "wrongs": ["사법", "공법"], "r": "사회법은 사법의 공법화 현상을 보여주는 중간법입니다." },
                { "q": "현대 민법에서 소유권 행사를 공공복리에 적합하게 제한하는 원칙은?", "correct": "소유권 공공복리의 원칙", "wrongs": ["소유권 절대의 원칙", "계약 자유의 원칙"], "r": "근대의 절대 원칙이 현대에 공공복리를 위해 수정되었습니다." },
                { "q": "다음 중 사회법의 종류에 해당하지 않는 것은?", "correct": "형법", "wrongs": ["노동법", "경제법"], "r": "형법은 전형적인 공법에 해당합니다." },
                { "q": "근대 민법의 '자기 책임의 원칙'과 같은 의미는?", "correct": "과실 책임의 원칙", "wrongs": ["무과실 책임의 원칙", "계약 공정의 원칙"], "r": "과실이 있는 경우에만 책임을 진다는 원칙입니다." },
                { "q": "현대 민법에서 제조물 책임 등에 예외적으로 인정되는 원칙은?", "correct": "무과실 책임주의", "wrongs": ["과실 책임주의", "사적 자치의 원칙"], "r": "가해자의 과실 없이도 피해자를 보호하기 위해 인정됩니다." },
                { "q": "근로기준법, 최저임금법 등이 속하는 사회법 분야는?", "correct": "노동법", "wrongs": ["경제법", "환경법"], "r": "노동자의 권리를 보장하는 법률입니다." },
                { "q": "사적 자치의 원칙을 보완하기 위해 도입된 현대 원칙은?", "correct": "계약 공정의 원칙", "wrongs": ["계약 자유의 원칙", "소유권 절대의 원칙"], "r": "내용의 공정성을 중시하는 원칙입니다." },
                { "q": "소비자기본법, 독점규제법이 속하는 법 영역은?", "correct": "경제법", "wrongs": ["노동법", "사회보장법"], "r": "공정 거래와 소비자 보호는 경제법 영역입니다." },
                { "q": "개인 간의 사적인 법률관계를 규율하는 일반법은?", "correct": "민법", "wrongs": ["헌법", "행정법"], "r": "민법은 사법의 가장 기본이 되는 법입니다." },
                { "q": "사회보장법이 추구하는 실질적 평등의 목적은?", "correct": "실질적 평등 구현", "wrongs": ["사유 재산권의 절대 보호", "국가 형벌권 행사"], "r": "취약 계층의 생활을 보장하여 평등을 꾀합니다." },
                { "q": "생활 관계 중 법규범에 의해 규율되어 권리·의무가 생기는 관계?", "correct": "법률관계", "wrongs": ["도덕관계", "호의관계"], "r": "법적 강제력이 수반되는 관계를 의미합니다." },
                { "q": "현대 민법 수정 원칙이 등장하게 된 주요 배경은?", "correct": "자본주의의 모순 해결", "wrongs": ["국가 권력의 강화", "절대 왕정 옹호"], "r": "빈부 격차 등 사회적 문제를 해결하기 위함입니다." },
                { "q": "민법상 '상대방의 신뢰를 저버리지 않아야 한다'는 원칙은?", "correct": "신의성실의 원칙", "wrongs": ["권리 남용 금지", "사적 자치의 원칙"], "r": "민법의 대원칙 중 하나입니다." },
                { "q": "사법 영역에 국가의 개입이 늘어나는 현상은?", "correct": "사법의 공법화", "wrongs": ["공법의 사법화", "행정 민영화"], "r": "사회법의 등장은 곧 사법의 공법화입니다." },
                { "q": "근대 민법 원칙 중 재산에 대한 절대적 지배를 강조한 원칙?", "correct": "사유 재산권 존중의 원칙", "wrongs": ["소유권 공공 원칙", "계약 공정 원칙"], "r": "근대 자유주의의 핵심 원칙입니다." },
                { "q": "국민기초생활보장법이 속하는 사회법 분류는?", "correct": "사회 보장법", "wrongs": ["노동법", "경제법"], "r": "복지와 보장을 담당하는 법률입니다." },
                { "q": "민법 제2조 '권리는 남용하지 못한다'는 원칙은?", "correct": "권리 남용 금지의 원칙", "wrongs": ["사적 자치 원칙", "과실 책임 원칙"], "r": "외형상 권리 행사라도 공익에 반하면 금지됩니다." },
                { "q": "방문판매 등에 관한 법률은 어느 법 영역인가?", "correct": "경제법", "wrongs": ["환경법", "노동법"], "r": "특수 거래에서 소비자를 보호하는 경제법입니다." },
                { "q": "폐기물관리법, 대기환경보전법이 속하는 사회법은?", "correct": "환경법", "wrongs": ["사회보장법", "노동법"], "r": "환경 보존을 위한 규제법들입니다." },
                { "q": "현대 민법 원칙에 대한 옳은 설명은?", "correct": "무과실 책임을 예외적으로 인정한다.", "wrongs": ["계약 자유를 절대적으로 보호한다.", "소유권은 어떠한 경우에도 침해 안 된다."], "r": "피해자 구제를 위해 예외적 무과실 책임을 둡니다." }
            ]},
            "l2": { "title": "02. 계약과 미성년자 보호", "questions": [
                { "q": "계약이 성립하기 위해 반드시 필요한 두 의사 표시의 합치는?", "correct": "청약과 승낙", "wrongs": ["제안과 거절", "통보와 확인"], "r": "계약은 한쪽의 청약과 상대방의 승낙이 합치될 때 성립합니다." },
                { "q": "미성년자가 단독으로 한 법률 행위의 법적 효력은?", "correct": "취소할 수 있음", "wrongs": ["당연 무효", "확정적 유효"], "r": "제한능력자의 행위는 본인이나 법정대리인이 취소할 수 있습니다." },
                { "q": "법률 행위의 '취소'와 '무효'의 공통점은?", "correct": "소급하여 효력이 상실됨", "wrongs": ["처음부터 효력이 없음", "누구나 주장할 수 있음"], "r": "취소권을 행사하면 계약 시점으로 소급하여 효력이 없어집니다." },
                { "q": "만취 상태(의사 무능력)에서 맺은 계약의 효력은?", "correct": "무효", "wrongs": ["취소 가능", "유효"], "r": "의사 능력이 없는 상태의 행위는 처음부터 아무런 효력이 없는 무효입니다." },
                { "q": "미성년자가 단독으로 할 수 있는 행위에 해당하는 것은?", "correct": "권리만을 얻는 행위(증여)", "wrongs": ["스마트폰 할부 구매", "친구 대출 보증"], "r": "부담 없이 이익만 얻는 행위는 미성년자 혼자서도 가능합니다." },
                { "q": "미성년자가 혼인을 한 경우 사법상 성년자로 보는 제도는?", "correct": "성년 의제", "wrongs": ["성년 후견", "권리 능력"], "r": "혼인한 미성년자는 민법상 독자적인 법률 행위가 가능해집니다." },
                { "q": "상대방이 미성년자의 부모에게 추인 여부의 답을 요구하는 권리는?", "correct": "확답 촉구권", "wrongs": ["철회권", "거절권"], "r": "불안정한 상태를 해결하기 위해 상대방이 갖는 질문권입니다." },
                { "q": "상대방이 미성년자임을 몰랐을 때 계약을 거두어들이는 권리는?", "correct": "철회권", "wrongs": ["확답 촉구권", "취소권"], "r": "선의의 상대방은 추인 전까지 계약을 철회할 수 있습니다." },
                { "q": "미성년자가 적극적 속임수를 써서 성인으로 믿게 한 경우의 결과는?", "correct": "취소권이 박탈됨", "wrongs": ["계약이 무효가 됨", "법정대리인이 처벌됨"], "r": "적극적 기망 수단을 쓴 경우 미성년자 측은 더 이상 취소할 수 없습니다." },
                { "q": "유언을 단독으로 할 수 있는 민법상 최소 연령은?", "correct": "만 17세", "wrongs": ["만 19세", "만 15세"], "r": "유언은 다른 계약과 달리 만 17세부터 단독으로 가능합니다." },
                { "q": "미성년자가 처분이 허락된 재산(용돈)을 쓰는 행위의 효력은?", "correct": "단독으로 유효함", "wrongs": ["항상 취소 가능", "무효"], "r": "부모가 범위를 정해 허락한 재산은 단독으로 처분할 수 있습니다." },
                { "q": "민법상 미성년자의 기준 연령은?", "correct": "만 19세 미만", "wrongs": ["만 18세 미만", "만 20세 미만"], "r": "민법상 성년은 만 19세부터 시작됩니다." },
                { "q": "계약금의 지급이나 계약서 작성이 계약 성립의 필수 요건인가?", "correct": "아님 (의사 합치면 됨)", "wrongs": ["맞음 (반드시 작성해야 함)", "계약서만 필수임"], "r": "민법상 계약은 구두 합의만으로도 성립하는 불요식 계약이 원칙입니다." },
                { "q": "확답 촉구 시 기간 내에 확답을 발송하지 않으면 어떻게 간주하나?", "correct": "추인한 것으로 봄", "wrongs": ["취소한 것으로 봄", "무효가 됨"], "r": "법정대리인이 답을 안 하면 계약을 인정한 것으로 간주합니다." },
                { "q": "성년 의제를 받은 미성년자가 투표를 할 수 있는가?", "correct": "아니오 (사법상으로만 성년)", "wrongs": ["예 (완전한 성년임)", "부모 동의 시 가능"], "r": "성년 의제는 민법 영역에만 적용됩니다." },
                { "q": "취소할 수 있는 법률 행위를 취소하지 않겠다고 확정 짓는 의사 표시?", "correct": "추인", "wrongs": ["철회", "거절"], "r": "추인을 하면 더 이상 취소할 수 없고 유효해집니다." },
                { "q": "미성년자가 단순히 '저 성인이에요'라고 말한 경우 취소권이 박탈되나?", "correct": "박탈되지 않음 (적극적 기망 아님)", "wrongs": ["즉시 박탈됨", "부모가 책임져야 함"], "r": "단순한 거짓말은 적극적 기망 수단으로 보지 않습니다." },
                { "q": "법률 행위의 효력이 처음부터 발생하지 않는 경우는?", "correct": "무효", "wrongs": ["취소", "철회"], "r": "무효는 처음부터 효력이 없는 상태입니다." },
                { "q": "미성년자의 임금 청구는 누가 해야 하는가?", "correct": "미성년자 본인", "wrongs": ["법정 대리인", "고용주"], "r": "근로기준법상 미성년자는 독자적으로 임금을 청구할 수 있습니다." },
                { "q": "취소권은 언제까지 행사할 수 있는가?", "correct": "법이 정한 일정 기간 내", "wrongs": ["기한 없이 평생", "1년 이내"], "r": "제척기간이 지나면 소멸합니다." }
            ]},
            "l3": { "title": "03. 불법 행위와 특수 배상 책임", "questions": [
                { "q": "일반 불법 행위의 성립 요건 중 자신의 행위가 위법함을 아는 지능은?", "correct": "책임 능력", "wrongs": ["의사 능력", "권리 능력"], "r": "불법 행위 책임을 지려면 책임 능력이 있어야 합니다." },
                { "q": "손해 배상의 방법으로 민법이 채택하고 있는 원칙은?", "correct": "금전 배상 원칙", "wrongs": ["원상 회복 원칙", "명예 회복 원칙"], "r": "특별한 합의가 없으면 현금 배상이 원칙입니다." },
                { "q": "초등학생(책임 무능력자)이 사고를 낸 경우 부모가 지는 책임은?", "correct": "감독자 책임", "wrongs": ["사용자 책임", "공작물 책임"], "r": "책임 무능력자를 감독할 의무가 있는 자가 지는 특수 책임입니다." },
                { "q": "알바생이 배달 중 사고를 낸 경우 식당 주인이 지는 책임은?", "correct": "사용자 배상 책임", "wrongs": ["감독자 책임", "공작물 소유자 책임"], "r": "피용자의 사무 집행 중 손해에 대해 사용자가 지는 책임입니다." },
                { "q": "사용자가 배상한 후 사고를 낸 직원에게 돈을 청구하는 권리는?", "correct": "구상권", "wrongs": ["청구권", "대위권"], "r": "대신 갚아준 돈을 실제 가해자에게 청구하는 권리입니다." },
                { "q": "건물의 간판이 떨어져 행인이 다친 경우 1차 책임자는?", "correct": "점유자 (세입자)", "wrongs": ["소유자 (집주인)", "시공사"], "r": "공작물 책임은 1차로 점유자가, 점유자가 주의를 다한 경우 소유자가 집니다." },
                { "q": "공작물 책임 중 '소유자'가 지는 책임의 성격은?", "correct": "무과실 책임", "wrongs": ["과실 책임", "조건부 책임"], "r": "소유자는 과실이 없음을 입증해도 책임을 면할 수 없습니다." },
                { "q": "여러 명이 공동으로 불법 행위를 하여 손해를 가한 경우의 책임은?", "correct": "연대 책임", "wrongs": ["분할 책임", "단독 책임"], "r": "가해자들은 연대하여 전체 손해를 배상해야 합니다." },
                { "q": "공동 불법 행위 시 피해자는 누구에게 배상을 청구할 수 있나?", "correct": "아무 가해자에게나 전액", "wrongs": ["주동자에게만", "각자의 지분만큼만"], "r": "피해자 보호를 위해 가해자 중 1인에게 전액 청구가 가능합니다." },
                { "q": "불법 행위 손해 배상 청구권의 단기 소멸 시효는?", "correct": "안 날부터 3년", "wrongs": ["1년", "5년"], "r": "피해자가 손해를 인지한 시점부터 3년 내에 행사해야 합니다." },
                { "q": "불법 행위가 성립하기 위한 6가지 요건이 아닌 것은?", "correct": "계약의 존재", "wrongs": ["위법성", "고의 또는 과실"], "r": "불법 행위는 계약 관계가 없어도 성립합니다." },
                { "q": "책임 능력 있는 미성년자가 사고를 낸 경우의 원칙적 책임은?", "correct": "미성년자 본인이 책임짐", "wrongs": ["부모가 무조건 책임짐", "책임이 면제됨"], "r": "책임 능력이 있다면 본인이 책임을 지는 것이 원칙입니다." },
                { "q": "가해 행위와 손해 발생 사이에 존재해야 하는 연결 고리는?", "correct": "인과 관계", "wrongs": ["상호 관계", "대립 관계"], "r": "행위로 인해 손해가 발생했다는 인과 관계가 필요합니다." },
                { "q": "동물이 타인에게 손해를 가한 경우 누가 책임을 지는가?", "correct": "동물 점유자", "wrongs": ["동물 주인(항상)", "동물 자신"], "r": "동물을 보관하고 관리하는 점유자가 책임을 집니다." },
                { "q": "불법 행위로 인해 발생한 정신적 손해에 대한 배상금은?", "correct": "위자료", "wrongs": ["보상금", "합의금"], "r": "정신적 고통에 대한 손해 배상을 위자료라고 합니다." },
                { "q": "정당방위나 긴급피난의 경우 위법성이 조각되어 책임이 면제되나?", "correct": "예 (위법성이 부정됨)", "wrongs": ["아니오", "일부만 배상"], "r": "정당한 사유가 있는 경우 불법 행위가 아닙니다." },
                { "q": "사용자 책임에서 사용자가 면책될 수 있는 조건은?", "correct": "상당한 주의를 다했음을 입증", "wrongs": ["직원이 고의로 한 경우", "피해자가 부주의"], "r": "선임 및 감독에 과실이 없음을 입증하면 면책될 수 있습니다." },
                { "q": "민사 소송 전 재산을 빼돌리지 못하게 묶어두는 절차는?", "correct": "가압류", "wrongs": ["강제집행", "공탁"], "r": "장래의 집행을 보장하기 위한 잠정 조치입니다." },
                { "q": "소액 사건 심판 제도의 적용 대상 금액은?", "correct": "3,000만 원 이하", "wrongs": ["1,000만 원", "5,000만 원"], "r": "소액의 민사 분쟁을 빠르게 해결하기 위한 제도입니다." },
                { "q": "국가 기관이 중재하여 화해를 이끌어내는 절차는?", "correct": "민사 조정", "wrongs": ["소액 심판", "내용 증명"], "r": "조정 위원회가 개입하여 합의를 이끌어내는 제도입니다." }
            ]},
            "l4": { "title": "04. 가족 관계의 형성과 해소", "questions": [
                { "q": "법률상 부부가 되기 위해 반드시 갖추어야 할 형식적 요건은?", "correct": "혼인 신고", "wrongs": ["결혼식", "동거"], "r": "우리나라는 법률혼 주의를 택하고 있습니다." },
                { "q": "혼인 신고는 안 했지만 실질적 부부로 생활하는 관계는?", "correct": "사실혼", "wrongs": ["법률혼", "동거"], "r": "신고만 없는 상태를 사실혼이라고 합니다." },
                { "q": "사실혼 배우자에게 인정되지 않는 법적 효과는?", "correct": "상속권", "wrongs": ["재산 분할 청구권", "위자료 청구권"], "r": "사실혼은 법적 친족 관계가 아니므로 상속권이 없습니다." },
                { "q": "협의 이혼 시 미성년 자녀가 있는 경우의 숙려 기간은?", "correct": "3개월", "wrongs": ["1개월", "6개월"], "r": "자녀의 복리를 위해 3개월의 기간을 둡니다." },
                { "q": "재판상 이혼의 효력이 발생하는 시점은?", "correct": "이혼 판결이 확정된 때", "wrongs": ["이혼 신고를 한 때", "소송을 제기한 때"], "r": "재판상 이혼은 판결 확정 시 즉시 이혼됩니다." },
                { "q": "바람을 피운 유책 배우자도 이혼 시 청구할 수 있는 것은?", "correct": "재산 분할", "wrongs": ["위자료", "손해배상"], "r": "재산 분할은 기여도에 따른 것이므로 유책 배우자도 가능합니다." },
                { "q": "일상적인 가사로 인해 발생한 빚에 대한 부부의 책임은?", "correct": "연대 책임", "wrongs": ["각자 책임", "남편 책임"], "r": "일상 가사 채무는 부부가 공동으로 책임을 져야 합니다." },
                { "q": "결혼 전부터 가진 재산을 각자의 소유로 인정하는 제도는?", "correct": "부부 별산제", "wrongs": ["부부 공동재산제", "증여제"], "r": "우리나라는 부부 각자의 명의 재산을 인정합니다." },
                { "q": "재판상 이혼을 하기 전 반드시 거쳐야 하는 필수 과정은?", "correct": "조정 (조정 전치주의)", "wrongs": ["숙려 기간", "혼인 신고"], "r": "가정 법원의 조정을 먼저 거친 후 소송으로 진행합니다." },
                { "q": "이혼 후 자녀를 직접 기르지 않는 부모가 자녀를 만나는 권리는?", "correct": "면접 교섭권", "wrongs": ["친권", "양육권"], "r": "비양육 부모와 자녀가 유대 관계를 유지하는 권리입니다." },
                { "q": "민법상 혼인을 할 수 있는 최소 연령(혼인 적령)은?", "correct": "만 18세", "wrongs": ["만 19세", "만 17세"], "r": "만 18세가 되면 혼인을 결정할 수 있습니다." },
                { "q": "협의 이혼의 효력이 발생하는 시점은?", "correct": "이혼 신고를 마친 때", "wrongs": ["판결이 확정된 때", "합의서를 쓴 때"], "r": "협의 이혼은 신고가 수리되어야 효력이 발생합니다." },
                { "q": "사실혼 배우자가 사망한 경우 재산 분할을 청구할 수 있나?", "correct": "아니오 (상속도 안 됨)", "wrongs": ["예 (기여도만큼)", "유언 시 가능"], "r": "사망 시에는 상속의 문제이며, 사실혼은 상속권이 없습니다." },
                { "q": "이혼 시 유책 배우자가 상대방에게 주는 정신적 배상금은?", "correct": "위자료", "wrongs": ["재산 분할", "양육비"], "r": "파탄의 원인을 제공한 자가 지는 손해 배상입니다." },
                { "q": "이혼 후에도 변하지 않는 법적 관계는?", "correct": "부모와 자녀 관계", "wrongs": ["부부 관계", "인척 관계"], "r": "친자 관계(혈연)는 이혼 후에도 유지됩니다." },
                { "q": "재판상 이혼 사유가 아닌 것은?", "correct": "단순한 성격 차이", "wrongs": ["부정한 행위", "악의의 유기"], "r": "성격 차이만으로는 법정 사유가 되지 않습니다." },
                { "q": "친권자 지정에 대해 협의가 안 될 때 결정하는 곳은?", "correct": "가정 법원", "wrongs": ["구청", "경찰서"], "r": "가족 분쟁은 가정 법원이 최종 결정합니다." },
                { "q": "사실혼 관계를 끝낼 때 필요한 절차는?", "correct": "일방적 의사 표시 (통보)", "wrongs": ["이혼 신고", "가정법원 판결"], "r": "사실혼은 통보만으로 해소됩니다." },
                { "q": "혼인 중의 출생자로 인정받는 입양 형태는?", "correct": "친양자 입양", "wrongs": ["일반 입양", "위탁 교육"], "r": "친양자는 법적으로 친생자와 똑같은 지위를 얻습니다." },
                { "q": "일상 가사 대리권의 범위에 속하지 않는 것은?", "correct": "배우자 명의 부동산 매각", "wrongs": ["식료품 구입", "자녀 학원비"], "r": "부동산 매각 등은 일상 가사에 포함되지 않습니다." }
            ]},
            "l5": { "title": "05. 자녀 보호와 재산 상속", "questions": [
                { "q": "양자가 친부모와의 친족 관계를 그대로 유지하는 입양은?", correct: "일반 입양", wrongs: ["친양자 입양", "파양"], r: "일반 입양은 양쪽 모두와 관계를 유지합니다." },
                { "q": "친양자 입양 시 아이의 성(姓)과 본은 어떻게 되나?", correct: "양부의 성과 본으로 변경", wrongs: ["친부의 성 유지", "새로 만듦"], r: "친양자는 양부의 성을 따릅니다." },
                { "q": "부모가 미성년 자녀를 보호하고 재산을 관리하는 권리와 의무는?", correct: "친권", wrongs: ["양육권", "상속권"], r: "미성년 자녀를 대리하고 교육할 포괄적 권능입니다." },
                { "q": "유언자가 사망하기 전까지 유언 내용을 바꿀 수 있나?", correct: "예 (철회의 자유)", wrongs: ["아니오", "부모 동의 시 가능"], r: "유언은 사망 전까지 언제든 변경 가능합니다." },
                { "q": "상속 순위에서 1순위에 해당하는 사람은?", correct: "직계 비속과 배우자", wrongs: ["직계 존속과 배우자", "형제자매"], r: "자녀와 배우자가 최우선 상속인입니다." },
                { "q": "배우자가 자녀와 공동 상속할 때 배우자의 상속 비율은?", correct: "자녀의 1.5배", wrongs: ["자녀와 동일", "자녀의 2배"], r: "배우자는 50%를 가산하여 받습니다." },
                { "q": "상속받을 재산보다 빚이 많을 때 전부 거절하는 것은?", correct: "상속 포기", wrongs: ["한정 승인", "단순 승인"], r: "재산과 빚 모두를 받지 않겠다고 선언하는 것입니다." },
                { "q": "받은 재산의 범위 내에서만 빚을 갚겠다고 하는 승인은?", correct: "한정 승인", wrongs: ["단순 승인", "특별 승인"], r: "재산 규모를 모를 때 빚을 떠안지 않기 위한 안전장치입니다." },
                { "q": "상속인이 될 자녀가 먼저 죽어 그 손자가 대신 상속받는 것은?", correct: "대습 상속", wrongs: ["유류분", "공동 상속"], r: "원래 상속 순위자가 미리 사망한 경우 그 후손이 대신 상속받습니다." },
                { "q": "상속인에게 법적으로 보장된 최소한의 상속 비율은?", correct: "유류분", wrongs: ["기여분", "법정분"], r: "유언으로 남에게 주더라도 가족이 찾을 수 있는 최소 몫입니다." },
                { "q": "직계 비속(자녀)의 유류분 비율은 법정 상속분의 얼마인가?", correct: "1/2", wrongs: ["1/3", "1/4"], r: "자녀와 배우자의 유류분은 절반입니다." },
                { "q": "상속의 승인이나 포기는 언제까지 해야 하는가?", correct: "안 날부터 3개월 내", wrongs: ["1개월 내", "1년 내"], r: "3개월 내에 신고해야 합니다." },
                { "q": "유언의 효력이 발생하는 시점은?", correct: "유언자가 사망한 때", wrongs: ["유언서를 쓴 때", "공증을 받은 때"], r: "사망이라는 조건이 충족되어야 효력이 생깁니다." },
                { "q": "친양자 입양은 몇 세 미만의 자녀만 가능한가?", correct: "만 15세 미만", wrongs: ["만 19세 미만", "만 10세 미만"], r: "친양자는 만 15세 미만만 가능합니다." },
                { "q": "상속 1순위와 2순위가 모두 없을 때 상속받는 사람은?", correct: "형제자매", wrongs: ["조카", "국가"], r: "비속, 존속이 없으면 3순위에게 돌아갑니다." },
                { "q": "자필 증서 유언이 유효하려면 반드시 포함되어야 하는 것은?", correct: "성명, 주소, 날짜, 날인", wrongs: ["증인 2명", "공증인 서명"], r: "자필 유언은 법정 요건이 필수입니다." },
                { "q": "친권 상실 선고는 누가 하는가?", correct: "가정 법원", wrongs: ["경찰서", "동사무소"], r: "법원이 친권을 박탈할 수 있습니다." },
                { "q": "상속 재산 중 부동산은 언제 상속인 소유가 되나?", correct: "사망 시 즉시 (등기 없이도)", wrongs: ["상속 등기를 한 때", "3개월 뒤"], r: "상속은 예외적으로 등기 없이 즉시 이전됩니다." },
                { "q": "유류분 반환 청구권은 누구에게 행사하는가?", correct: "재산을 많이 받은 수증자", wrongs: ["국가", "법원"], r: "재산을 가져간 사람에게 청구합니다." },
                { "q": "부모가 모두 사망한 경우 미성년 자녀를 위해 선임되는 자는?", correct: "후견인", wrongs: ["친권자", "대리인"], r: "친권자가 없을 때 보호자를 세웁니다." }
            ]},
            "l6": { "title": "06. 부동산 거래와 주택 임차권 보호", "questions": [
                { "q": "부동산 소유권 이전의 효력이 발생하는 시점은?", correct: "등기부에 기재된 때", wrongs: ["잔금을 치른 때", "계약서를 쓴 때"], r: "등기라는 공시 방법을 갖춰야 완성됩니다." },
                { "q": "부동산 등기부 중 소유권에 관한 사항을 적는 곳은?", correct: "갑구", wrongs: ["을구", "표제부"], r: "갑구는 소유권과 관련된 사항을 기록합니다." },
                { "q": "저당권, 전세권 등 소유권 이외의 권리를 기록하는 곳은?", correct: "을구", wrongs: ["갑구", "표제부"], r: "을구는 빚이나 빌린 권리를 기재합니다." },
                { "q": "부동산 거래에서 계약 해제가 불가능해지는 단계는?", correct: "중도금 지급 후", wrongs: ["계약금 지급 후", "매물 확인 후"], r: "중도금을 주면 일방적 해제가 안 됩니다." },
                { "q": "매도인이 계약을 파기하려면 계약금의 얼마를 돌려줘야 하나?", correct: "배액(2배) 상환", wrongs: ["받은 금액만큼", "3배"], r: "판 사람은 2배를 돌려줘야 합니다." },
                { "q": "임차인이 집주인이 바뀌어도 계속 살 수 있는 권리는?", correct: "대항력", wrongs: ["우선변제권", "최우선변제권"], r: "새 주인에게 임차권을 주장할 수 있는 힘입니다." },
                { "q": "대항력을 갖추기 위해 필요한 두 가지 요건은?", correct: "주택 인도 + 전입 신고", wrongs: ["확정 일자 + 전입 신고", "등기 + 입주"], r: "거주와 주민등록이 필요합니다." },
                { "q": "경매 시 후순위 권리자보다 먼저 돈을 돌받을 수 있는 권리는?", correct: "우선변제권", wrongs: ["대항력", "청구권"], r: "확정 일자를 받아 순위를 확보했을 때 갖는 권리입니다." },
                { "q": "우선변제권을 얻기 위해 전입 신고 외에 추가로 필요한 것은?", correct: "확정 일자", wrongs: ["실거주 1년", "인감 증명"], r: "계약서에 날짜 도장을 받아야 합니다." },
                { "q": "소액 임차인이 다른 권리자보다 가장 먼저 배상받는 권리는?", correct: "최우선변제권", wrongs: ["우선변제권", "대항력"], r: "보증금이 적은 서민을 위해 앞선 순위를 줍니다." },
                { "q": "최우선변제권을 받기 위해 확정 일자가 필수인가?", correct: "아니오 (대항 요건만 있으면 됨)", wrongs: ["예 (반드시 필요함)", "임대인 동의 시 면제"], r: "전입신고와 점유만으로 보호됩니다." },
                { "q": "부동산 등기부의 '표제부'에 적히는 내용은?", correct: "소재지, 면적, 구조", wrongs: ["소유자 이름", "은행 담보 금액"], r: "표제부는 물리적 현황을 보여주는 곳입니다." },
                { "q": "등기부를 믿고 거래했으나 실제 주인이 따로 있을 때 보호받나?", correct: "아니오 (공신력 불인정)", wrongs: ["예 (무조건 보호)", "국가가 배상함"], r: "진실한 소유자가 우선합니다." },
                { "q": "주택임대차보호법은 어느 법 영역에 가장 가까운가?", correct: "사회법", wrongs: ["순수 사법", "형법"], r: "약자인 임차인을 보호하는 사회법적 성격입니다." },
                { "q": "임대차 계약 기간을 정하지 않았을 때 보장되는 최소 기간은?", correct: "2년", wrongs: ["1년", "없음"], r: "최소 2년을 법으로 보장합니다." },
                { "q": "물권과 채권이 충돌할 때 원칙적인 우선순위는?", correct: "물권 우선", wrongs: ["채권 우선", "평등함"], r: "물권은 모든 사람에게 주장 가능하므로 강력합니다." },
                { "q": "등기된 임차권은 물권과 채권 중 무엇인가?", correct: "채권 (물권화된 채권)", wrongs: ["완전한 물권", "공법"], r: "임차권은 원래 채권이나 물권과 비슷한 힘을 갖습니다." },
                { "q": "임대차 계약 종료 후 보증금을 못 받을 때 순위를 지키는 방법은?", correct: "임차권 등기 명령 제도", wrongs: ["가압류 신청", "주민등록 유지"], r: "등기하면 이사 가도 대항력이 유지됩니다." },
                { "q": "부동산 거래 시 계약서만 쓴 상태에서 소유권을 주장할 수 있나?", correct: "아니오 (채권적 권리만 있음)", wrongs: ["예 (즉시 소유자)", "절반만 인정"], r: "등기 전까지는 채권만 있는 상태입니다." },
                { "q": "서울 소액 임차인의 최우선 변제 한도액 기준(2026 예상)?", correct: "5,500만 원", wrongs: ["3,700만 원", "1억 원"], r: "일정액 이하 보증금 중 5,500만 원까지 0순위 보호됩니다." }
            ]}
        }
    }
}

# --------------------------------------------------------------------------
# 3. 세션 상태 관리 (진행도 유지)
# --------------------------------------------------------------------------
if 'main_ch' not in st.session_state: st.session_state.main_ch = "CH1"
if 'sub_ch' not in st.session_state: st.session_state.sub_ch = list(FULL_DATA["CH1"]['chapters'].keys())[0]
if 'matching_done' not in st.session_state: st.session_state.matching_done = []
if 'selected_kw' not in st.session_state: st.session_state.selected_kw = None
if 'q_idx' not in st.session_state: st.session_state.q_idx = 0
if 'score' not in st.session_state: st.session_state.score = 0
if 'answered' not in st.session_state: st.session_state.answered = False
if 'quiz_opts' not in st.session_state: st.session_state.quiz_opts = []
if 'wrong_pool' not in st.session_state: st.session_state.wrong_pool = []

# --------------------------------------------------------------------------
# 4. 사이드바 (내비게이션)
# --------------------------------------------------------------------------
with st.sidebar:
    st.title("📚 정법 마스터 HUB")
    st.caption("1단원~4단원 전단원 통합 학습")
    
    # 대단원 선택
    new_main = st.selectbox("단원 선택", list(FULL_DATA.keys()), format_func=lambda x: FULL_DATA[x]['title'])
    if new_main != st.session_state.main_ch:
        st.session_state.main_ch = new_main
        st.session_state.sub_ch = list(FULL_DATA[new_main]['chapters'].keys())[0]
        st.session_state.matching_done = []
        st.session_state.q_idx = 0
        st.session_state.score = 0
        st.session_state.answered = False
        st.session_state.wrong_pool = []
        st.rerun()

    # 소단원 선택
    chapters = FULL_DATA[st.session_state.main_ch]['chapters']
    new_sub = st.selectbox("주제 선택", list(chapters.keys()), format_func=lambda x: chapters[x]['title'])
    if new_sub != st.session_state.sub_ch:
        st.session_state.sub_ch = new_sub
        st.session_state.matching_done = []
        st.session_state.q_idx = 0
        st.session_state.score = 0
        st.session_state.answered = False
        st.session_state.wrong_pool = []
        st.rerun()

    st.markdown("---")
    if st.button("🔄 현재 주제 학습 초기화", use_container_width=True):
        st.session_state.matching_done = []
        st.session_state.q_idx = 0
        st.session_state.score = 0
        st.session_state.answered = False
        st.rerun()

# --------------------------------------------------------------------------
# 5. 메인 로직 렌더링
# --------------------------------------------------------------------------
main_data = FULL_DATA[st.session_state.main_ch]
sub_data = main_data['chapters'][st.session_state.sub_ch]

st.header(f"{main_data['title']}")
st.subheader(f"📍 {sub_data['title']}")

# [TYPE 1] 매칭 엔진 (1단원용)
if main_data['type'] == 'matching':
    st.info("💡 아래 키워드를 먼저 클릭하고, 상단의 알맞은 카테고리 버튼을 눌러 배치하세요.")
    
    cols = st.columns(len(sub_data['options']))
    for i, opt_name in enumerate(sub_data['options']):
        with cols[i]:
            st.markdown(f"#### 📂 {opt_name}")
            matched = [k['text'] for k in sub_data['keywords'] if k['text'] in st.session_state.matching_done and k['category'] == opt_name]
            for m in matched: st.success(m)
            
            if st.button("이곳으로 분류", key=f"slot_{i}"):
                if st.session_state.selected_kw:
                    if st.session_state.selected_kw['category'] == opt_name:
                        st.session_state.matching_done.append(st.session_state.selected_kw['text'])
                        st.session_state.selected_kw = None
                        st.toast("정답입니다! ✨")
                        st.rerun()
                    else: st.error("오답입니다! 다시 생각해보세요.")
                else: st.warning("아래에서 키워드를 먼저 선택하세요.")

    st.markdown("---")
    st.markdown("### 🧩 키워드 대기소")
    remaining = [k for k in sub_data['keywords'] if k['text'] not in st.session_state.matching_done]
    
    if not remaining:
        st.balloons()
        st.success("🎉 모든 키워드 분류를 완료했습니다!")
    else:
        kw_cols = st.columns(4)
        for idx, kw in enumerate(remaining):
            with kw_cols[idx % 4]:
                is_sel = st.session_state.selected_kw == kw
                btn_label = f"📍 {kw['text']}" if is_sel else kw['text']
                if st.button(btn_label, key=f"kw_{idx}", type="primary" if is_sel else "secondary"):
                    st.session_state.selected_kw = kw
                    st.rerun()

# [TYPE 2] 퀴즈 엔진 (2~4단원용)
elif main_data['type'] == 'quiz':
    questions = sub_data['questions']
    if st.session_state.q_idx < len(questions):
        curr_q = questions[st.session_state.q_idx]
        
        st.write(f"진행 상황: **{st.session_state.q_idx + 1} / {len(questions)}**")
        st.progress((st.session_state.q_idx + 1) / len(questions))
        st.info(f"Q. {curr_q['q']}")

        if not st.session_state.quiz_opts or not st.session_state.answered:
            opts = [curr_q['correct']] + curr_q['wrongs']
            random.shuffle(opts)
            st.session_state.quiz_opts = opts

        for val in st.session_state.quiz_opts:
            if st.button(val, key=f"q_{val}", disabled=st.session_state.answered):
                st.session_state.answered = True
                if val == curr_q['correct']:
                    st.session_state.score += 1
                    st.success("정답! 👏")
                else:
                    st.session_state.wrong_pool.append(curr_q)
                    st.error(f"오답! 정답은: {curr_q['correct']}")
                st.rerun()

        if st.session_state.answered:
            st.markdown(f"""<div class="explanation-box"><b>💡 마스터 해설</b><br>{curr_q['r']}</div>""", unsafe_allow_html=True)
            if st.button("다음 문제로 ➡️", type="primary"):
                st.session_state.q_idx += 1
                st.session_state.answered = False
                st.session_state.quiz_opts = []
                st.rerun()
    else:
        st.balloons()
        st.title("🏆 학습 완료!")
        st.metric("최종 점수", f"{(st.session_state.score / len(questions)) * 100:.0f}%")
        
        if st.session_state.wrong_pool:
            with st.expander("📝 오답 노트 확인"):
                for wq in st.session_state.wrong_pool:
                    st.error(f"Q. {wq['q']}")
                    st.write(f"정답: **{wq['correct']}**")
                    st.caption(f"해설: {wq['r']}")
                    st.markdown("---")

# 6. 하단 팁 섹션
if "tips" in sub_data:
    with st.expander("🎓 Master's 실전 Tip"):
        for t in sub_data['tips']: st.write(f"• {t}")

st.markdown("---")
st.caption("© 2026 Politics & Law Mastery HUB - All Content Unified")
